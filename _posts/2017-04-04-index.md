---
layout:     post
title:      技术方案设计
subtitle:   此文档是关于前端后端的技术方案设计，前端vue，vuex，api，后端数据库设计，表结构，字段等。
date:       2017-04-04
author:     hemei
header-img: img/post-bg-index.jpg
catalog: 	 true
tags:
---

## 一、基本信息

|  | 描述 |  备注 |
|:------------------ | :-------------------| :----------|
| 1.项目迭代版本 | 1.0.0 |  |
| 2.主要功能 | 对某个功能模块进行简单描述|  |
| 3.人员 | 该功能模块包括该功能模块owner，开发和测试|  |
| 4.开发联调环境| 本地，dev|  |
| 5.测试环境 | test|  |
| 6.提测时间	 | 根据项目计划，确定提测时间	|  |
| 7.上线时间	 | 根据项目计划，确定上线时间	|  |
| 8.备注	 | 如任务优先级，产品需求特别标注，相关文档地址等|  |

## 二、需求分析
    对整体业务功能分析的进一步细化，输出每个功能模块实现涉及到的用户、权限、场景描述，并输出整体业务功能流程图。

## 三、数据结构定义

    前后端共同定义输出该功能模块相关的数据结构，根据输出数据结构定义相应文档。

## 四、后端设计

### 1.数据库设计
    按照数据库开发规范对数据库进行设计，并以sql语句的形式产出数据库设计，如：涉及到的表，需要更新表中的字段或新增表

    进行数据库设计需要注意以下几点：

    * 新增字段，是否对现有数据有影响

    * 提醒，新建表，必须有三个字段（create_time,update_time,create_guid）

    * 注释

### 2.dubbo接口设计与实现
    主要包括dubbo接口定义与实现，并输出接口文档(confluence地址)。

    接口实现需要注意以下几点：

    * 出参入参序列化

    * 入参验证

    * sql查询，是否需要新建索引等

    * 最好细化到具体哪一层去实现某个功能（dao，integrate，biz，service）

### 3.流程图输出和详细业务功能的描述
    输出后端相关复杂业务逻辑，算法流程图。  

### 4.异常处理及错误码定义
    确认code列表和对应的场景，并和产品确认对应的文案，并更新错误码文档

### 5.老数据处理方案
    该功能开发是否涉及到对老数据进行处理（补数据，删除数据等）,如果有说明处理方案

### 6.关键问题及解决问题的思路
    实现该功能的关键问题和解决思路

## 五、前端设计

### 1.流程图和详细业务功能的描述
    输出前端相关复杂详细功能描述和业务逻辑流程图。 

### 2. 页面url定义

### 3.node server api定义

    根据前后端共同协作产出的接口定义，包括url地址，出参，入参.
    api 定义采用RESTful的设计规范  

参考：
<a href="https://i6448038.github.io/2017/06/28/rest-%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83/" target="_blank">RESTful API规范（详细版）</a>
### 4.页面结构设计

    实现该功能涉及到的前端页面结构设计，比如需要新增目录，更新目录或者相关vue-router定义。

### 5.前端store，action，mutation 设计
    涉及到状态多页面调用同一个数据的话，使用状态树。

  * state设计

        如:子任务的state设计

        tasks:{
            ":taskId": {
            "subTaskList": [111, 112, 113]  //
          }
        }
        子任务列表详细信息：
          subTaskList: {  
              ":subTaskId": {
            }
        }

  * action

      * 命名：行为＋实体＋Action ，如：addSubTaskAction

      * 技术实现：异步获取接口数据，提交相应mutation，如：调用新增子任务接口，并在返回成功后commit  addSubTask, 否则返回错误信息

  * mutation

    * 命名：行为＋实体，如：addSubTask

    * 技术实现：需要更新的数据结构逻辑描述，如：判断subTaskList中是否存在子任务Id对应的信息，存在则return ，否则，新增索引，并在subTaskList中添加该子任务详细信息

### 6.组件的设计

  * 通用组件：根据项目业务需求去评审是否需要提取为通用组件，按照组件开发规范进行设计。
  * 业务组件：按照组件开发规范进行设计。

### 7. 异常处理
    业务逻辑非主流程异常处理,如：

    - 字数超过限制，显示文案信息

    - 接口返回异常时，业务逻辑操作或者显示文案信息等

### 8.关键问题及解决问题的思路

    实现该功能的关键问题和解决思路

## 六、外部接口
    实现该功能是否依赖外部接口，如果依赖，写明依赖的接口以及接口的相关信息（url、出参、入参等）

## 七、备注
    以上未涉及到的方面，可以在备注中说明，如：

    - 影响面：实现该功能需要修改某个功能模块或者公共组件等；
    
    - 风险点（依赖运维，跨团队，环境）；

    - 涉及到后续维护或者扩展等（todolist）。

## 八.里程碑
     项目负责人负责给出实现该功能模块的实现所需的时间点控制
     例如：
     6.27 下午 确定技术方案
     6.27 下午 —— 6.28 开发
     6.29 自测、联调 下班前提测
     
## 九.评审记录     
     记录每次评审会议过程中的问题和建议